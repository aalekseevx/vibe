log_level: info
use_sync_test: true
traces_dir: "traces/chat_firefox_h264"

path_characteristic_presets:
  variable_capacity:
    phases:
      - duration: 40s
        capacity: 1000000  # 1 Mbit/s
        max_burst: 160000  # 160 Kbit
      - duration: 20s
        capacity: 2500000  # 2.5 Mbit/s
        max_burst: 160000  # 160 Kbit
      - duration: 20s
        capacity: 600000   # 0.6 Mbit/s
        max_burst: 160000  # 160 Kbit
      - duration: 20s
        capacity: 1000000  # 1 Mbit/s
        max_burst: 160000  # 160 Kbit

simulcast_configs_presets:
  standard_qualities:
    initial_quality: "chat_720p"
    qualities:
      - name: "chat_180p"
        bitrate: 400000
        trace_file: "chat_180p_400.txt"
        csrc: 2
      - name: "chat_360p"
        bitrate: 1000000
        trace_file: "chat_360p_1000.txt"
        csrc: 3
      - name: "chat_720p"
        bitrate: 2000000
        trace_file: "chat_720p_2000.txt"
        csrc: 4

test_cases:
  - name: TestVnetRunnerABR/VariableAvailableCapacitySingleFlow
    flow_mode: single
    path_characteristic_preset: variable_capacity
    sender:
      mode: abr

  - name: TestVnetRunnerSimulcast/VariableAvailableCapacitySingleFlow
    flow_mode: single
    path_characteristic_preset: variable_capacity
    sender:
      mode: simulcast
      simulcast_presets:
        - standard_qualities

  - name: TestVnetRunnerSimulcast/VariableAvailableCapacity3SimulcastTracks
    flow_mode: single
    path_characteristic_preset: variable_capacity
    sender:
      mode: simulcast
      simulcast_presets:
        - standard_qualities
        - standard_qualities
        - standard_qualities
